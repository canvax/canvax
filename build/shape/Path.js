define("shape/Path",["../display/Shape","mmvis","../math/index"],function(t,s,a){"use strict";var e,h=this&&this.__extends||(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])},function(t,s){function a(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});s.__esModule=!0;var i=t("../display/Shape"),r=t("mmvis"),p=t("../math/index"),f=function(t){function s(s){var a=r._.extend({pointList:[],path:""},s.context);return s.context=a,s.__parsePathData=null,s.type="path",t.call(this,s)||this}return h(s,t),s.prototype.watch=function(t,s,a){"path"==t&&this.graphics.clear()},s.prototype._parsePathData=function(t){if(this.__parsePathData)return this.__parsePathData;if(!t)return[];this.__parsePathData=[];var s=r._.compact(t.replace(/[Mm]/g,"\\r$&").split("\\r")),a=this;return r._.each(s,function(t){a.__parsePathData.push(a._parseChildPathData(t))}),this.__parsePathData},s.prototype._parseChildPathData=function(t){var s,a=t,e=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];for(a=(a=(a=(a=a.replace(/  /g," ")).replace(/ /g,",")).replace(/(\d)-/g,"$1,-")).replace(/,,/g,","),s=0;s<e.length;s++)a=a.replace(new RegExp(e[s],"g"),"|"+e[s]);var h=a.split("|"),i=[],r=0,p=0;for(s=1;s<h.length;s++){var f=h[s],n=f.charAt(0),c=(f=(f=f.slice(1)).replace(new RegExp("e,-","g"),"e-")).split(",");c.length>0&&""===c[0]&&c.shift();for(var o=0;o<c.length;o++)c[o]=parseFloat(c[o]);for(;c.length>0&&!isNaN(c[0]);){var u,l,_,m=null,b=[],d=r,k=p;switch(n){case"l":r+=c.shift(),p+=c.shift(),m="L",b.push(r,p);break;case"L":r=c.shift(),p=c.shift(),b.push(r,p);break;case"m":r+=c.shift(),p+=c.shift(),m="M",b.push(r,p),n="l";break;case"M":r=c.shift(),p=c.shift(),m="M",b.push(r,p),n="L";break;case"h":r+=c.shift(),m="L",b.push(r,p);break;case"H":r=c.shift(),m="L",b.push(r,p);break;case"v":p+=c.shift(),m="L",b.push(r,p);break;case"V":p=c.shift(),m="L",b.push(r,p);break;case"C":b.push(c.shift(),c.shift(),c.shift(),c.shift()),r=c.shift(),p=c.shift(),b.push(r,p);break;case"c":b.push(r+c.shift(),p+c.shift(),r+c.shift(),p+c.shift()),r+=c.shift(),p+=c.shift(),m="C",b.push(r,p);break;case"S":u=r,l=p,"C"===(_=i[i.length-1]).command&&(u=r+(r-_.points[2]),l=p+(p-_.points[3])),b.push(u,l,c.shift(),c.shift()),r=c.shift(),p=c.shift(),m="C",b.push(r,p);break;case"s":u=r,l=p,"C"===(_=i[i.length-1]).command&&(u=r+(r-_.points[2]),l=p+(p-_.points[3])),b.push(u,l,r+c.shift(),p+c.shift()),r+=c.shift(),p+=c.shift(),m="C",b.push(r,p);break;case"Q":b.push(c.shift(),c.shift()),r=c.shift(),p=c.shift(),b.push(r,p);break;case"q":b.push(r+c.shift(),p+c.shift()),r+=c.shift(),p+=c.shift(),m="Q",b.push(r,p);break;case"T":u=r,l=p,"Q"===(_=i[i.length-1]).command&&(u=r+(r-_.points[0]),l=p+(p-_.points[1])),r=c.shift(),p=c.shift(),m="Q",b.push(u,l,r,p);break;case"t":u=r,l=p,"Q"===(_=i[i.length-1]).command&&(u=r+(r-_.points[0]),l=p+(p-_.points[1])),r+=c.shift(),p+=c.shift(),m="Q",b.push(u,l,r,p);break;case"A":d=r,k=p,m="A",b=[c.shift(),c.shift(),c.shift(),c.shift(),c.shift(),r=c.shift(),p=c.shift(),d,k];break;case"a":d=r,k=p,m="A",b=[c.shift(),c.shift(),c.shift(),c.shift(),c.shift(),r+=c.shift(),p+=c.shift(),d,k]}i.push({command:m||n,points:b})}"z"!==n&&"Z"!==n||i.push({command:"z",points:[]})}return i},s.prototype.draw=function(t){this.__parsePathData=null,this.context.$model.pointList=[];for(var s=this._parsePathData(this.context.$model.path),a=0,e=s.length;a<e;a++)for(var h=0,i=s[a].length;h<i;h++){var r=s[a][h].command,f=s[a][h].points;switch(r){case"L":t.lineTo(f[0],f[1]);break;case"M":t.moveTo(f[0],f[1]);break;case"C":t.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":t.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":p.Arc.drawArc(t,f[7],f[8],f);break;case"z":t.closePath()}}return this},s}(i.default);s.default=f});