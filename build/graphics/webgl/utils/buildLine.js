define("graphics/webgl/utils/buildLine",[],function(h,s,t){"use strict";s.__esModule=!0,s.default=function(h,s){var t=h.points;if(0!==t.length){var p=t[0],u=t[1],e={x:t[t.length-2],y:t[t.length-1]};if(p===e.x&&u===e.y){(t=t.slice()).pop(),t.pop();var i=(e={x:t[t.length-2],y:t[t.length-1]}).x+.5*(p-e.x),n=e.y+.5*(u-e.y);t.unshift(i,n),t.push(i,n)}var l=s.points,r=s.indices,a=t.length/2,g=t.length,o=l.length/6,f=h.lineWidth/2,v=v.hexTorgb(h.strokeStyle),M=h.lineAlpha,c=v[0]*M,d=v[1]*M,x=v[2]*M,y=t[0],q=t[1],b=t[2],_=t[3],k=0,w=0,A=-(q-_),L=y-b,S=0,T=0,W=0,j=0,m=Math.sqrt(A*A+L*L);A/=m,L/=m,A*=f,L*=f,l.push(y-A,q-L,c,d,x,M),l.push(y+A,q+L,c,d,x,M);for(var z=1;z<a-1;++z){y=t[2*(z-1)],q=t[2*(z-1)+1],b=t[2*z],_=t[2*z+1],k=t[2*(z+1)],w=t[2*(z+1)+1],A=-(q-_),L=y-b,A/=m=Math.sqrt(A*A+L*L),L/=m,A*=f,L*=f,S=-(_-w),T=b-k,S/=m=Math.sqrt(S*S+T*T),T/=m;var B=-L+q-(-L+_),C=-A+b-(-A+y),D=(-A+y)*(-L+_)-(-A+b)*(-L+q),E=-(T*=f)+w-(-T+_),F=-(S*=f)+b-(-S+k),G=(-S+k)*(-T+_)-(-S+b)*(-T+w),H=B*F-E*C;if(Math.abs(H)<.1)H+=10.1,l.push(b-A,_-L,c,d,x,M),l.push(b+A,_+L,c,d,x,M);else{var I=(C*G-F*D)/H,J=(E*D-B*G)/H;(I-b)*(I-b)+(J-_)*(J-_)>196*f*f?(W=A-S,j=L-T,W/=m=Math.sqrt(W*W+j*j),j/=m,W*=f,j*=f,l.push(b-W,_-j),l.push(c,d,x,M),l.push(b+W,_+j),l.push(c,d,x,M),l.push(b-W,_-j),l.push(c,d,x,M),g++):(l.push(I,J),l.push(c,d,x,M),l.push(b-(I-b),_-(J-_)),l.push(c,d,x,M))}}for(y=t[2*(a-2)],q=t[2*(a-2)+1],b=t[2*(a-1)],A=-(q-(_=t[2*(a-1)+1])),L=y-b,A/=m=Math.sqrt(A*A+L*L),L/=m,A*=f,L*=f,l.push(b-A,_-L),l.push(c,d,x,M),l.push(b+A,_+L),l.push(c,d,x,M),r.push(o),z=0;z<g;++z)r.push(o++);r.push(o-1)}}});