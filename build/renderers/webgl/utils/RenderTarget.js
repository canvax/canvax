define("renderers/webgl/utils/RenderTarget",["../../../math/index","../../../geom/Matrix","../../../settings","pixi-gl-core"],function(t,e,i){"use strict";e.__esModule=!0;var s=t("../../../math/index"),r=t("../../../geom/Matrix"),a=t("../../../settings"),n=t("pixi-gl-core").default.GLFramebuffer,o=function(){function t(t,e,i,o,h){this.gl=t,this.frameBuffer=null,this.clearColor=[0,0,0,0],this.size=new s.Rectangle(0,0,1,1),this.resolution=o||a.default.RESOLUTION,this.projectionMatrix=new r.default,this.frame=null,this.defaultFrame=new s.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.root=h,this.frameBuffer=new n(t,100,100),this.frameBuffer.framebuffer=null,this.setFrame(),this.resize(e,i)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),i.a=1/t.width,i.d=-1/t.height,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null},t}();e.default=o});