"use strict";!function(e,s){if("function"==typeof define&&define.amd)define(["exports","mmvis"],s);else if("undefined"!=typeof exports)s(exports,require("mmvis"));else{var t={};s(t,e.mmvis),e.undefined=t}}(void 0,function(e,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,s){var t=e.points;if(0===t.length)return;var h=t[0],p=t[1],u={x:t[t.length-2],y:t[t.length-1]};if(h===u.x&&p===u.y){(t=t.slice()).pop(),t.pop();var n=(u={x:t[t.length-2],y:t[t.length-1]}).x+.5*(h-u.x),i=u.y+.5*(p-u.y);t.unshift(n,i),t.push(n,i)}var r=s.points,f=s.indices,o=t.length/2,a=t.length,l=r.length/6,d=e.lineWidth/2,v=v.hexTorgb(e.strokeStyle),g=e.strokeAlpha,x=v[0]*g,y=v[1]*g,c=v[2]*g,m=t[0],M=t[1],q=t[2],b=t[3],k=0,_=0,j=-(M-b),A=m-q,O=0,P=0,S=0,T=0,W=Math.sqrt(j*j+A*A);j/=W,A/=W,j*=d,A*=d,r.push(m-j,M-A,x,y,c,g),r.push(m+j,M+A,x,y,c,g);for(var w=1;w<o-1;++w){m=t[2*(w-1)],M=t[2*(w-1)+1],q=t[2*w],b=t[2*w+1],k=t[2*(w+1)],_=t[2*(w+1)+1],j=-(M-b),A=m-q,W=Math.sqrt(j*j+A*A),j/=W,A/=W,j*=d,A*=d,O=-(b-_),P=q-k,W=Math.sqrt(O*O+P*P),O/=W,P/=W;var z=-A+M-(-A+b),B=-j+q-(-j+m),C=(-j+m)*(-A+b)-(-j+q)*(-A+M),D=-(P*=d)+_-(-P+b),E=-(O*=d)+q-(-O+k),F=(-O+k)*(-P+b)-(-O+q)*(-P+_),G=z*E-D*B;if(Math.abs(G)<.1)G+=10.1,r.push(q-j,b-A,x,y,c,g),r.push(q+j,b+A,x,y,c,g);else{var H=(B*F-E*C)/G,I=(D*C-z*F)/G;196*d*d<(H-q)*(H-q)+(I-b)*(I-b)?(S=j-O,T=A-P,W=Math.sqrt(S*S+T*T),S/=W,T/=W,S*=d,T*=d,r.push(q-S,b-T),r.push(x,y,c,g),r.push(q+S,b+T),r.push(x,y,c,g),r.push(q-S,b-T),r.push(x,y,c,g),a++):(r.push(H,I),r.push(x,y,c,g),r.push(q-(H-q),b-(I-b)),r.push(x,y,c,g))}}m=t[2*(o-2)],M=t[2*(o-2)+1],q=t[2*(o-1)],b=t[2*(o-1)+1],j=-(M-b),A=m-q,W=Math.sqrt(j*j+A*A),j/=W,A/=W,j*=d,A*=d,r.push(q-j,b-A),r.push(x,y,c,g),r.push(q+j,b+A),r.push(x,y,c,g),f.push(l);for(var J=0;J<a;++J)f.push(l++);f.push(l-1)}});