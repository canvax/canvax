"use strict";!function(e,n){if("function"==typeof define&&define.amd)define(["exports","@tweenjs/tween.js","../utils/index","mmvis"],n);else if("undefined"!=typeof exports)n(exports,require("@tweenjs/tween.js"),require("../utils/index"),require("mmvis"));else{var t={};n(t,e.tween,e.index,e.mmvis),e.undefined=t}}(void 0,function(e,n,t,o){Object.defineProperty(e,"__esModule",{value:!0});var a=i(n),r=i(t);function i(e){return e&&e.__esModule?e:{default:e}}var d,u,f=0;if("undefined"!=typeof window){d=window.requestAnimationFrame,u=window.cancelAnimationFrame;for(var s=["ms","moz","webkit","o"],l=0;l<s.length&&!window.requestAnimationFrame;++l)d=window.requestAnimationFrame=window[s[l]+"RequestAnimationFrame"],u=window.cancelAnimationFrame=window[s[l]+"CancelAnimationFrame"]||window[s[l]+"CancelRequestAnimationFrame"]}d=d||function(e){var n=(new Date).getTime(),t=Math.max(0,16-(n-f)),i=setTimeout(function(){e(n+t)},t);return f=n+t,i},u=u||function(e){clearTimeout(e)};var m=[],c=null;function w(e){if(e)return m.push(e),c=c||d(function(){a.default.update();var e=m;for(m=[],c=null;0<e.length;)e.shift().task()})}function p(e){for(var n=!1,t=0,i=m.length;t<i;t++)m[t].id===e.id&&(n=!0,m.splice(t,1),t--,i--);return 0==m.length&&(u(c),c=null),n}e.default={registFrame:w,destroyFrame:p,registTween:function(e){var n=o._.extend({from:null,to:null,duration:500,onStart:function(){},onUpdate:function(){},onComplete:function(){},onStop:function(){},repeat:0,delay:0,easing:"Linear.None",desc:""},e);o.global.getAnimationEnabled()||(n.duration=0,n.delay=0);var t={},i="tween_"+r.default.getUID();if(n.id&&(i=i+"_"+n.id),n.from&&n.to){(t=new a.default.Tween(n.from).to(n.to,n.duration).onStart(function(){n.onStart(n.from)}).onUpdate(function(){n.onUpdate(n.from)}).onComplete(function(){p({id:i}),t._isCompleteed=!0,n.onComplete(n.from)}).onStop(function(){p({id:i}),t._isStoped=!0,n.onStop(n.from)}).repeat(n.repeat).delay(n.delay).easing(a.default.Easing[n.easing.split(".")[0]][n.easing.split(".")[1]])).id=i,t.start(),function e(){t._isCompleteed||t._isStoped?t=null:w({id:i,task:e,desc:n.desc,tween:t})}()}return t},destroyTween:function(e,n){e.stop()},Tween:a.default,taskList:m}});