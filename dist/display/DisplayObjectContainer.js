"use strict";!function(e,t){if("function"==typeof define&&define.amd)define(["exports","mmvis","./DisplayObject"],t);else if("undefined"!=typeof exports)t(exports,require("mmvis"),require("./DisplayObject"));else{var n={};t(n,e.mmvis,e.DisplayObject),e.undefined=n}}(void 0,function(e,i,t){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d,c,s,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,((n=t)&&n.__esModule?n:{default:n}).default),d=f,(c=[{key:"addChild",value:function(e,t){if(e)return-1!=this.getChildIndex(e)?e.parent=this:(e.parent&&e.parent.removeChild(e),void 0===t&&(t=this.children.length),this.children.splice(t,0,e),(e.parent=this).heartBeat&&this.heartBeat({convertType:"children",target:e,src:this}),this._afterAddChild&&this._afterAddChild(e)),e}},{key:"addChildAt",value:function(e,t){return this.addChild(e,t)}},{key:"removeChild",value:function(e){return this.removeChildAt(i._.indexOf(this.children,e))}},{key:"removeChildAt",value:function(e){if(e<0||e>this.children.length-1)return!1;var t=this.children[e];return null!=t&&(t.parent=null),this.children.splice(e,1),this.heartBeat&&this.heartBeat({convertType:"children",target:t,src:this}),this._afterDelChild&&this._afterDelChild(t,e),t}},{key:"removeChildById",value:function(e){for(var t=0,n=this.children.length;t<n;t++)if(this.children[t].id==e)return this.removeChildAt(t);return!1}},{key:"removeAllChildren",value:function(){for(;0<this.children.length;)this.removeChildAt(0)}},{key:"destroy",value:function(){for(var e=0,t=this.children.length;e<t;e++)this.getChildAt(e).destroy(),e--,t--;this._destroy()}},{key:"cleanAnimates",value:function(){for(var e=0,t=this.children.length;e<t;e++)this.getChildAt(e).cleanAnimates();this._cleanAnimates()}},{key:"getChildById",value:function(e,t){if(t)return null;for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].id==e)return this.children[n];return null}},{key:"getChildAt",value:function(e){return e<0||e>this.children.length-1?null:this.children[e]}},{key:"getChildIndex",value:function(e){return i._.indexOf(this.children,e)}},{key:"setChildIndex",value:function(e,t){if(e.parent==this){var n=i._.indexOf(this.children,e);t!=n&&(this.children.splice(n,1),this.children.splice(t,0,e))}}},{key:"getNumChildren",value:function(){return this.children.length}},{key:"getObjectsUnderPoint",value:function(e,t){for(var n=[],i=this.children.length-1;0<=i;i--){var r=this.children[i];if(null!=r&&r.context.$model.visible)if(r instanceof f){if(!r._eventEnabled)continue;if(r.mouseChildren&&0<r.getNumChildren()){var l=r.getObjectsUnderPoint(e);0<l.length&&(n=n.concat(l))}}else{if(!r._eventEnabled&&!r.dragEnabled)continue;if(r.getChildInPoint(e)&&(n.push(r),null!=t&&!isNaN(t)&&n.length==t))return n}}return n}}])&&l(d.prototype,c),void(s&&l(d,s)),f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=o(this,h(f).call(this,e))).children=[],t.mouseChildren=[],t._eventEnabled=!0,t}e.default=a});